# KAN_COLLECTION
我方开始舰数cond损伤等信息->阵型->航向->敌方信息  
目标选择->  
攻击方式->（普通，2连，弹观）  
命中->（命中，miss，暴击）  
伤害->（对方护甲，血量）  
击杀  

假设  
对wo改的通过率  
在wo改第一次出手前中破wo改：1轮炮击  
假设我方无敌：损伤补正，司令部  
我方所有舰船攻击能力相同：随机攻击顺序，顺序攻击顺序，旗舰补正  
基本数据 Class  
ShipData  
先无视Item  

Deck  

暂时用文本内容在此直接填充  
{  
ShipData ：预设  
New2组船 预设  
}  
战斗情景  
昼，夜，空    
阵型（自选，默认单纵） 连续战斗：需考虑无法组成时  


主程序  
Main（）
{
  
  New战斗
  
}


逻辑  
Class BaseBattle

f战斗开始  
损伤，舰数.  
读取文本提取基础信息：最好能和呼叫舰队的导出通用（可能暂时需要手动填充）  
初始化船，舰队，情景  


f地图  
对多次战斗的计算  
敌方不同阵型  

f阵型  
判断是否能组成设想阵型  
否则调用备用阵型  

f航向（Deck，战斗场景，本次概率  ）  
航向扭转在航空战之后if（）：AirBatlle  
各航向概率new Hougeki(舰队，情景，本次概率)  

Class Hougeki
字典成员 我方功绩：（DeckID，命中率，总伤害，有效伤害，击沉数，特殊攻击发动数）  
字典成员 敌方状态：（DeckID，数组（MaxHp，NowHp））  

F出手顺序概率判断 我方会受伤，舰能力不同时非独立概率  

f各船CI率判断  


f目标选择  
中破停止返回概率   
CI
递归：  
命中->f火力损伤计算->递归  
擦弹->f擦弹损伤计算->递归  
Miss->递归  

f火力损伤计算
数组 伤害枚举 short int
有序数组排列 计算每种可能的概率  

敌方状态  

f擦弹损伤计算  


有关随机
伤害必然是差为1的等差数列，数列A的规模为n，数列B的规模为m  
2数列相加产生的新数为C=（n+m）-1个  
中值下标，奇数为C/2向下取整，偶数为C/2和C/2-1|中值下标为C/2  
D=中值下标-首下标=中值下标  
新数列的分布为（C0,1）（C1,2）...（C中值,D).....（Cn，1）  
中值元素前for(int i=0,i<D,++i) 分布[i]=i+1;    
if(C==1) 不进行后续  
if(C%2)  
填充第一个中值(CD,D+1)  
for(int i=D+1,i<数组长度,++i) 分布[i]=2D-i+2;  
else  
中值元素后for(int i=D,i<数组长度,++i) 分布[i]=2D-i+1;  
边界：两伤害数组至少有1个元素  
此时C=1；D=0；中值前分布=1，不进行后续;  
奇数时，中值前分布=D,中值和中值后（CD，D+1），（CD+1，D）  
偶数,中值1（CD，D+1),中值2(CD+1,D+1),(CD+2,D)  
